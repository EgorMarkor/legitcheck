{% load static %}
<link rel="stylesheet" href="{% static 'font/stylesheet.css' %}">
<style>
  * { font-family: 'Google Sans', sans-serif !important; }

  /* ====== ОСНОВНАЯ ВЕРСТКА ХЕДЕРА (оставил вашу) ====== */
  .header__frame-2131329207 {
    align-self: stretch;
    flex-shrink: 0;
    height: 11.1rem;
    position: relative;
    overflow: hidden;
  }
  .header__frame-2131329236 {
    width: 150.896rem;
    height: 6.8rem;
    position: absolute;
    left: 20.5rem;
    top: 2.8rem;
  }
  .header__border {
    background: linear-gradient(180deg, #171c24 0%, #11151a 100%);
    border-radius: 100rem;
    border-width: 0.2rem;
    border-image: linear-gradient(180deg, rgba(179,214,255,0.03) 0%, rgba(179,214,255,0) 100%);
    border-image-slice: 1;
    padding: 2.3rem 2.6rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
    justify-content: center;
    width: 45.4rem;
    height: 6.8rem;
    position: absolute;
    left: 52.8rem;
    top: 0;
    overflow: hidden;
  }
  .header__frame-3 {
    padding: .9rem 0;
    flex-shrink: 0;
    width: 35.8rem;
    height: 5.2rem;
    position: relative;
  }
  .header__frame-2 {
    display: flex;
    flex-direction: row;
    gap: 2.5rem;
    align-items: center;
    width: 35.4rem;
    position: absolute;
    left: -.05rem;
    top: .95rem;
  }
  .header__link,
  .header__link2,
  .header__link3,
  .header__link4 {
    border-radius: .8rem;
    flex-shrink: 0;
    position: relative;
  }
  .header__link { width: 5.7rem; height: 2.8rem; }
  .header__link2 { width: 5.2rem; height: 2.8rem; }
  .header__link3 { width: 10.6rem; height: 2.8rem; }
  .header__link4 { width: 7.8rem; height: 2.8rem; }
  .header__div,
  .header__div2,
  .header__div3,
  .header__div4 {
    color: #fff;
    font-family: "GoogleSans-Medium";
    font-size: 1.4rem;
    line-height: 2rem;
    font-weight: 500;
    position: absolute;
  }
  .header__div { left: .8rem; top: .6rem; width: 4.1rem; }
  .header__div2 { left: .75rem; top: .55rem; width: 3.8rem; }
  .header__div3 { left: .4rem; top: .5rem; width: 9.8rem; }
  .header__div4 { left: 1.4rem; top: .6rem; width: 5rem; }

  .header__frame-1948754033 {
    display: flex;
    flex-direction: row;
    gap: 1.858rem;
    align-items: center;
    justify-content: flex-start;
    width: 31.1rem;
    position: absolute;
    left: 119.8rem;
    top: 0;
  }

  /* ====== БЛОК НЕАВТОРИЗОВАННОГО ПОЛЬЗОВАТЕЛЯ (кастомная кнопка) ====== */
  .header__frame-1948754034 {
    background: linear-gradient(180deg, #171c24 0%, #11151a 100%);
    border-radius: 100rem;
    padding: .6rem 1.3rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
    justify-content: center;
    width: 31.1rem;
    height: 7.3rem;
    position: relative;
    overflow: hidden;
  }
  .header__custom-tg-btn {
    display: flex;
    flex-direction: row;
    gap: .95rem;
    align-items: center;
    justify-content: flex-start;
    cursor: pointer;
    user-select: none;
    text-decoration: none;
  }
  .header__custom-tg-icon {
    width: 4.49rem;
    height: 4.49rem;
    position: relative;
  }
  .header__custom-tg-icon img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
  }
  .header__frame-1948754048 {
    display: flex;
    flex-direction: column;
    gap: 0;
    align-items: flex-start;
    justify-content: center;
  }
  .header__div5 {
    color: #fff;
    font-family: "GoogleSans-Bold";
    font-size: 1.6rem;
    line-height: 2.569rem;
    font-weight: 700;
  }
  .header__telegram {
    color: #464f5d;
    font-family: "GoogleSans-Regular";
    font-size: 1.2rem;
    line-height: 1.927rem;
  }

  /* ====== БАЛАНС + АВАТАР АВТОРИЗОВАННОГО ПОЛЬЗОВАТЕЛЯ ====== */
  .header2__frame-1948754033 {
    display: flex;
    flex-direction: row;
    gap: 1.858rem;
    align-items: center;
    justify-content: flex-start;
    position: absolute;
    top: 0;
    left: 9.5rem;
  }
  .header2__frame-1000006148 {
    background: linear-gradient(180deg, #171c24 0%, #11151a 100%);
    border-radius: 185.843rem;
    border-width: .186rem;
    border-image: linear-gradient(180deg, rgba(179,214,255,.03) 0%, rgba(179,214,255,0) 100%);
    border-image-slice: 1;
    padding: .743rem .743rem .743rem 2.788rem;
    display: flex;
    flex-direction: row;
    gap: .558rem;
    align-items: center;
    width: 15rem;
    height: 6.8rem;
    overflow: hidden;
  }
  .header2___128-90 {
    color: #fff;
    font-family: "GoogleSans-Bold";
    font-size: 1.4rem;
    font-weight: 700;
    width: 5.86rem;
  }
  .header2__frame-1948754032 {
    background: rgba(19,205,144,.12);
    border-radius: 112.698rem;
    width: 4.17rem;
    height: 2.93rem;
    position: relative;
    overflow: hidden;
  }
  .header2__frame-1948754050 {
    width: 1.878rem;
    height: 1.597rem;
    position: absolute;
    left: 1.24rem;
    top: .676rem;
    overflow: visible;
  }
  .header2__frame-1000006062 {
    background: #171b22;
    border-radius: 139.544rem;
    width: 4.696rem;
    height: 4.696rem;
    position: relative;
    overflow: hidden;
    display: block;
  }
  .header2__image-12 {
    width: 5.26rem;
    height: 5.26rem;
    position: absolute;
    left: -.072rem;
    top: 0;
    object-fit: cover;
  }

  /* ====== КАНАЛ СПРАВА ====== */
  .header__frame-1948754032 {
    background: linear-gradient(180deg,#171c24 0%, #11151a 100%);
    border-radius: 185.843rem;
    border-width: .186rem;
    border-image: linear-gradient(180deg, rgba(179,214,255,.03) 0%, rgba(179,214,255,0) 100%);
    border-image-slice: 1;
    padding: 1.115rem 2.416rem;
    display: flex;
    flex-direction: column;
    gap: 1.858rem;
    align-items: center;
    justify-content: center;
    width: 25.8rem;
    height: 6.8rem;
    position: absolute;
    left: 0;
    top: 0;
    overflow: hidden;
  }
  .header__frame-19487540493 {
    display: flex;
    flex-direction: row;
    gap: 1rem;
    align-items: center;
  }
  .header__legit-check {
    color: #fff;
    font-family: "GoogleSans-Bold";
    font-size: 1.6rem;
    line-height: 2.157rem;
    font-weight: 700;
  }
  .header__telegram2 {
    color: #464f5d;
    font-family: "GoogleSans-Regular";
    font-size: 1.2rem;
    line-height: 1.618rem;
  }

  /* ====== СОСТОЯНИЕ / СООБЩЕНИЯ АВТОРИЗАЦИИ ====== */
  .tg-auth-status {
    position: fixed;
    z-index: 9999;
    right: 1rem;
    bottom: 1rem;
    background: #1e2530;
    color: #fff;
    padding: 1rem 1.4rem;
    border-radius: .8rem;
    font-size: 1.3rem;
    line-height: 1.4;
    max-width: 28rem;
    box-shadow: 0 4px 18px rgba(0,0,0,.4);
    display: none;
  }
  .tg-auth-status.show { display: block; }
  .tg-auth-status.ok { border-left: .4rem solid #15c780; }
  .tg-auth-status.err { border-left: .4rem solid #ff5252; }
</style>

<div class="header__frame-2131329207">
  <div class="header__frame-2131329236">
    <div class="header__border">
      <div class="header__frame-3">
        <div class="header__frame-2">
          <div class="header__link"><div class="header__div">О нас</div></div>
            <div class="header__link2"><div class="header__div2">Цены</div></div>
            <div class="header__link3"><div class="header__div3">Этапы работы</div></div>
            <div class="header__link4"><div class="header__div4">Статьи</div></div>
        </div>
      </div>
    </div>

    <div class="header__frame-1948754033">
      {% if webapp_user %}
        <!-- Пользователь авторизован -->
        <div class="header2__frame-1948754033">
          <div class="header2__frame-1000006148">
            <div class="header2___128-90">{{ webapp_user.balance }} ₽</div>
            <div class="header2__frame-1948754032">
              <img class="header2__frame-1948754050" src="{% static 'head_page/money.svg' %}" alt="">
            </div>
          </div>
          <a href="{% url 'pc_account' %}" class="header2__frame-1000006062">
            <img class="header2__image-12" src="{{ webapp_user.img|default:'/static/img/default-avatar.png' }}" alt="avatar">
          </a>
        </div>
      {% else %}
        <!-- НЕ авторизован: кастомная кнопка Telegram -->
        <div class="header__frame-1948754034">
          <div class="header__custom-tg-btn" id="tgAuthBtn">
              <div class="header__frame-1948754034">
                  <script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="LegitLogisticsBot" data-size="large" data-userpic="false" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
              </div>
          </div>
        </div>
      {% endif %}
    </div>

    <div class="header__frame-1948754032" style="left:0; top:0;">
      <div class="header__frame-19487540493">
        <img class="header__svg3" src="{% static 'head_page/svg2.svg' %}" alt="">
        <div class="header__frame-19487540482">
          <div class="header__legit-check">@legit_check</div>
          <div class="header__telegram2">Наш Telegram-канал</div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Статус всплывашка -->
<div class="tg-auth-status" id="tgAuthStatus"></div>

<script>
  window.onTelegramAuth = function(user) {
     alert('Logged in as ' + user.first_name);
  };
</script>